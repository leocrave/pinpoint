var $=require("jquery"),getBrowserType=function(){var e=navigator.userAgent,r="Others",i="";return e.search(/(Chrome\/)/gi)>0&&(browserInfo=e.match(/(Chrome\/[\d|.]+)/gi),i=browserInfo[0].replace(/(Chrome\/)/,""),r="Chrome/"+i),e.search(/(Chromium\/)/gi)>0&&(browserInfo=e.match(/(Chromium\/[\d|.]+)/gi),i=browserInfo[0].replace(/(Chromium\/)/,""),r="Chromium/"+i),e.search(/(Firefox\/)/gi)>0&&(browserInfo=e.match(/(Firefox\/[\d|.]+)/gi),i=browserInfo[0].replace(/(Firefox\/)/,""),r="Firefox/"+i),e.search(/(Seamonkey\/)/gi)>0&&(browserInfo=e.match(/(Seamonkey\/[\d|.]+)/gi),i=browserInfo[0].replace(/(Seamonkey\/)/,""),r="Seamonkey/"+i),e.search(/(Safari\/)/gi)>0&&!e.match(/(Chrome\/)/gi)>0&&!e.match(/(Chromium\/)/gi)>0&&(browserInfo=e.match(/(Safari\/[\d|.]+)/gi),i=browserInfo[0].replace(/(Safari\/)/,""),r="Safari/"+i),(e.search(/(Opera\/)/gi)>0||e.match(/(OPR\/)/gi)>0)&&(browserInfo=e.match(""!=e.match(/(Opera\/[\d|.]+)/gi)?/(Opera\/[\d|.]+)/gi:/(OPR\/[\d|.]+)/gi),i=""!=e.match(/(Opera\/[\d|.]+)/gi)?browserInfo[0].replace(/(Opera\/)/,""):browserInfo[0].replace(/(OPR\/)/,""),r="Opera/"+i),e.search(/(\;\sMSIE\/)/gi)>0&&(browserInfo=e.match(/(MSIE\s[\d|.]+)/gi),i=browserInfo[0].replace(/(MSIE\s\/)/,""),r="Internet Explorer/"+i),e.search(/(Edge\/)/gi)>0&&(browserInfo=e.match(/(Edge\/[\d|.]+)/gi),i=browserInfo[0].replace(/(Edge\/)/,""),r="Edge/"+i),r},getDeviceType=function(){var e=navigator.userAgent,r="desktop";return e.search(/Mobile/gi)>0&&(r="mobile"),e.search(/Tablet/gi)>0&&(r="tablet"),r},getOSType=function(){var e=navigator.userAgent,r="";return e.search(/Win16/gi)>0&&(r="Windows 3.11"),e.search(/(Windows 95|Win95|Windows_95)/gi)>0&&(r="Windows 95"),e.search(/(Win 9x 4.90|Windows ME)/gi)>0&&(r="Windows ME"),e.search(/(Windows 98|Win98)/gi)>0&&(r="Windows 98"),e.search(/Windows CE/gi)>0&&(r="Windows CE"),e.search(/(Windows NT 5.0|Windows 2000)/gi)>0&&(r="Windows 2000"),e.search(/(Windows NT 5.1|Windows XP)/gi)>0&&(r="Windows XP"),e.search(/Windows NT 5.2/gi)>0&&(r="Windows Server 2003"),e.search(/Windows NT 6.0/gi)>0&&(r="Windows Vista"),e.search(/(Windows 7|Windows NT 6.1)/gi)>0&&(r="Windows 7"),e.search(/(Windows 8.1|Windows NT 6.3)/gi)>0&&(r="Windows 8.1"),e.search(/(Windows 8|Windows NT 6.2)/gi)>0&&(r="Windows 8"),e.search(/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/gi)>0&&(r="Windows NT 4.0"),e.search(/Windows ME/gi)>0&&(r="Windows ME"),e.search(/(Linux|X11)/gi)>0&&(r="Linux"),e.search(/Android/gi)>0&&(r="Android"),e.search(/OpenBSD/gi)>0&&(r="Open BSD"),e.search(/SunOS/gi)>0&&(r="Sun OS"),e.search(/Mac OS X/gi)>0&&(r="Mac OS X"),e.search(/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/gi)>0&&(r="Mac OS"),e.search(/(iPhone|iPad|iPod)/gi)>0&&(r="iOS"),e.search(/QNX/gi)>0&&(r="QNX"),e.search(/UNIX/gi)>0&&(r="UNIX"),e.search(/BeOS/gi)>0&&(r="BeOS"),e.search(/OS\/2/gi)>0&&(r="OS/2"),e.search(/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/gi)>0&&(r="Search Bot"),r},getCurrentUrl=function(){return window.location.href},getChannelRef=function(){var e,r,i="";return(e=getParams())&&(r=e.match(/c=[\d|\w]+/gi),i=r[0].replace(/c\=/gi,"")),i},getBatchRef=function(){var e,r,i="";return(e=getParams())&&(r=e.match(/b=[\d|\w]+/gi),i=r[0].replace(/b\=/gi,"")),i},getParams=function(){var e,r;return e=getCurrentUrl(),r=e.match(/\?[(\w|\d|\=|\&|\#)]+/gi),null===r?!1:r[0]},getPageName=function(){var e,r="";return e=getCurrentUrl(),pageAry=e.match(/(([(\w|\.)]*\?)|(\/[\w]+\/\?))/gi),null!==pageAry&&(r=pageAry[0].replace(/([.]*[\w]*\?)|([\/]+[\?]*)/gi,"")),""==r.trim()?"index":r},getTrimUrl=function(){var e=getCurrentUrl();return e=e.match(/[\w|\:\/]+\?*/gi),trimUrl=e[0].replace(/\/\?/gi,"")};module.exports={track:function(e){var r=e.action,i=void 0===e.component?"":e.component,o=void 0===e.section?"":e.section;$.get("https://ipinfo.io/",function(e){ip=e.ip,browser=getBrowserType(),device=getDeviceType(),os=getOSType(),url=getTrimUrl(),channel=getChannelRef(),batch=getBatchRef(),page=getPageName();var n={ip:ip,action:r,url:url,channel:channel,batch:batch,browser:browser,device:device,os:os,component:i,section:o,page:page};$.post("http://wearecrave.com/pinpoint/insertPinpoint.php",n,function(e){console.log(e)},"json")},"json")},getBrowserType:getBrowserType,getDeviceType:getDeviceType,getOSType:getOSType,getCurrentUrl:getCurrentUrl};